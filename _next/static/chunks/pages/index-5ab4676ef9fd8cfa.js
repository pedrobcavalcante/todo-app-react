(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(3535)}])},3535:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>J});var a=s(4848),o=s(6540),r=s(8657),i=s.n(r);let l=(e,t)=>{let s="object"==typeof t?JSON.stringify(t):t;localStorage.setItem(e,s)},n=e=>{let t=localStorage.getItem(e);try{return t?JSON.parse(t):null}catch(e){return t}},c=()=>{let[e,t]=(0,o.useState)("light");return(0,o.useEffect)(()=>{let e=n("theme")||"light";t(e),document.body.className=e},[]),{theme:e,toggleTheme:()=>{let s="light"===e?"dark":"light";t(s),document.body.className=s,l("theme",s)}}};var d=s(7945),u=s.n(d);let _=()=>{let{theme:e,toggleTheme:t}=c();return(0,a.jsx)("button",{onClick:t,className:u().button,"aria-label":"Toggle Theme",children:"dark"===e?(0,a.jsx)("img",{src:"/icons/icon-sun.svg",alt:"Light Theme",className:u().icon}):(0,a.jsx)("img",{src:"/icons/icon-moon.svg",alt:"Dark Theme",className:u().icon})})},h=e=>{let{onSearch:t,onClearSearch:s}=e,[r,l]=(0,o.useState)(""),[n,c]=(0,o.useState)(!1);return(0,a.jsxs)("header",{className:i().header,children:[(0,a.jsx)("h1",{className:i().title,children:"TODO"}),(0,a.jsxs)("div",{className:i().searchContainer,children:[(0,a.jsx)("input",{type:"text",placeholder:"Search tasks...",value:r,className:i().searchInput,onChange:e=>l(e.target.value)}),(0,a.jsx)("button",{className:i().searchButton,onClick:()=>{r.trim()&&(t(r.trim()),c(!0))},disabled:!r.trim(),children:"Search"}),(0,a.jsx)("button",{className:i().clearButton,onClick:()=>{l(""),c(!1),s()},disabled:!n,children:"Clear Search"}),(0,a.jsx)(_,{})]})]})};var p=s(4381),m=s.n(p);let k=e=>{let{placeholder:t,onChange:s,value:o,onEnter:r}=e;return(0,a.jsx)("input",{type:"text",className:m().input,placeholder:t,onChange:s,value:o,onKeyPress:e=>{"Enter"===e.key&&r&&r()}})};var g=s(8989),T=s.n(g);let x=e=>{let{remainingTasks:t,filter:s,setFilter:o,clearCompleted:r}=e;return(0,a.jsxs)("footer",{className:T().footer,children:[(0,a.jsxs)("span",{children:[t," items left"]}),(0,a.jsxs)("div",{className:T().filters,children:[(0,a.jsx)("button",{onClick:()=>o("all"),className:"all"===s?T().activeFilter:"",children:"All"}),(0,a.jsx)("button",{onClick:()=>o("active"),className:"active"===s?T().activeFilter:"",children:"Active"}),(0,a.jsx)("button",{onClick:()=>o("completed"),className:"completed"===s?T().activeFilter:"",children:"Completed"})]}),(0,a.jsx)("button",{onClick:r,className:T().clearCompleted,children:"Clear Completed"})]})};var y=s(2601),f=s.n(y),C=s(7053),j=s(69),v=s.n(j);let w=e=>{let{id:t,text:s,completed:r,onToggle:i,onEdit:l,onDelete:n,isFirst:c}=e,[d,u]=(0,o.useState)(!1),[_,h]=(0,o.useState)(s),p=()=>{u(!1),_.trim()!==s&&l(t,_.trim())};return(0,a.jsxs)("li",{className:"".concat(v().task," ").concat(r?v().completed:""," ").concat(c?v().firstTask:""),children:[(0,a.jsx)("button",{className:"".concat(v().checkButton," ").concat(r?v().checked:""),onClick:()=>i(t),"aria-label":r?"Mark as incomplete":"Mark as complete",children:r&&(0,a.jsx)("img",{src:"/icons/icon-check.svg",alt:"Checked"})}),d?(0,a.jsx)("input",{type:"text",value:_,onChange:e=>h(e.target.value),onBlur:p,onKeyDown:e=>"Enter"===e.key&&p(),autoFocus:!0,className:v().editInput}):(0,a.jsx)("span",{onClick:()=>u(!0),className:v().text,children:s}),(0,a.jsx)("button",{className:v().deleteButton,onClick:()=>n(t),"aria-label":"Delete task",children:(0,a.jsx)("img",{src:"/icons/icon-cross.svg",alt:"Delete"})})]})};var N=s(4591),S=s.n(N);let b=e=>{let{tasks:t,onToggle:s,onEdit:o,onDelete:r,onReorder:i}=e,l=[...t].sort((e,t)=>e.position-t.position);return(0,a.jsx)(C.JY,{onDragEnd:e=>{let{destination:s,source:a}=e;if(!s||s.index===a.index)return;let o=Array.from(t),[r]=o.splice(a.index,1);o.splice(s.index,0,r),i(o)},children:(0,a.jsx)(C.gL,{droppableId:"todo-list",children:e=>(0,a.jsxs)("ul",{className:S().taskList,...e.droppableProps,ref:e.innerRef,children:[l.map((e,t)=>(0,a.jsx)(C.sx,{draggableId:e.id.toString(),index:t,children:i=>(0,a.jsx)("li",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,children:(0,a.jsx)(w,{id:e.id,text:e.text,completed:e.completed,onToggle:s,onEdit:o,onDelete:r,isFirst:0===t})})},e.id.toString())),e.placeholder]})})})};class I{async updateTasks(e){let t=[];for(let s of e)t.push(await this.updateTaskUseCase.execute(s));return t}async addTask(e){return this.addTaskUseCase.execute(e)}async getTasks(){return this.getTasksUseCase.execute()}constructor(e,t,s){this.addTaskUseCase=e,this.getTasksUseCase=t,this.updateTaskUseCase=s}}class L{async execute(e){let t=await this.taskRepository.getTasks();t.push(e),await this.taskRepository.saveTasks(t)}constructor(e){this.taskRepository=e}}class B{async execute(){return this.taskRepository.getTasks()}constructor(e){this.taskRepository=e}}class E{async getTask(e){return(await this.dataSource.getTasks()).find(t=>t.id===e)}async updateTask(e){let t=await this.dataSource.getTasks(),s=t.findIndex(t=>t.id===e.id);if(-1!==s)t[s]=e,await this.dataSource.saveTasks(t);else throw Error("Task not found.")}async getTasks(){return this.dataSource.getTasks()}async saveTasks(e){return this.dataSource.saveTasks(e)}constructor(e){this.dataSource=e}}class F{async getTasks(){let e=localStorage.getItem(this.key);return e?JSON.parse(e):[]}async saveTasks(e){localStorage.setItem(this.key,JSON.stringify(e))}constructor(){this.key="tasks"}}class P{async execute(e){let t=await this.taskRepository.getTask(e.id);if(!t)throw Error("Task not found");let s={...t,completed:e.completed,text:e.text,position:e.position};return await this.taskRepository.updateTask(e),s}constructor(e){this.taskRepository=e}}let O=new E(new F),R=new I(new L(O),new B(O),new P(O)),D=()=>{let[e,t]=(0,o.useState)([]),[s,a]=(0,o.useState)("all"),[r,i]=(0,o.useState)("");(0,o.useEffect)(()=>{(async()=>{t(await R.getTasks())})()},[]);let l=e.filter(e=>r?e.text.toLowerCase().includes(r.toLowerCase()):"active"===s?!e.completed:"completed"!==s||e.completed),n=async e=>{let s=e.map((e,t)=>({...e,position:t}));t(s),await R.updateTasks(s)},c=async s=>{let a=e.filter(e=>e.id!==s).map((e,t)=>({...e,position:t}));t(a),await R.updateTasks(a)};return{tasks:l,addTask:async s=>{if(!s.trim())return;let a={id:Date.now(),position:e.length,text:s.trim(),completed:!1};await R.addTask(a),t(e=>[...e,a])},editTask:async(s,a)=>{let o=e.map(e=>e.id===s?{...e,text:a}:e);await R.updateTasks(o),t(o)},toggleTask:async s=>{let a=e.map(e=>e.id===s?{...e,completed:!e.completed}:e);await R.updateTasks(a),t(a)},clearCompleted:async()=>{let s=e.filter(e=>!e.completed).map((e,t)=>({...e,position:t}));t(s),await R.updateTasks(s)},setFilter:a,remainingTasks:e.filter(e=>!e.completed).length,filter:s,searchTasks:e=>{i(e)},clearSearch:()=>{i("")},deleteTask:c,reorderTasks:n}},H=()=>{let{tasks:e,addTask:t,editTask:s,toggleTask:r,clearCompleted:i,setFilter:l,remainingTasks:n,filter:c,searchTasks:d,clearSearch:u,deleteTask:_,reorderTasks:p}=D(),[m,g]=(0,o.useState)("");return(0,a.jsxs)("main",{className:f().todoPage,children:[(0,a.jsx)(h,{onSearch:e=>{d(e)},onClearSearch:u}),(0,a.jsx)("div",{className:f().inputContainer,children:(0,a.jsx)(k,{placeholder:"Create a new todo...",value:m,onChange:e=>g(e.target.value),onEnter:()=>{t(m),g("")}})}),(0,a.jsx)(b,{tasks:e,onToggle:r,onEdit:s,onDelete:_,onReorder:e=>{p(e)}}),(0,a.jsx)(x,{remainingTasks:n,setFilter:l,clearCompleted:i,filter:c})]})},U=()=>(0,a.jsx)(H,{}),J=()=>(0,a.jsx)(U,{})},2601:e=>{e.exports={todoPage:"Todo_todoPage__ns6c_",header:"Todo_header__OMYcj",title:"Todo_title__mAYz_",themeToggleButton:"Todo_themeToggleButton__POvZs",inputContainer:"Todo_inputContainer___NOQf",input:"Todo_input__PYIVQ",taskList:"Todo_taskList__s5z5W",task:"Todo_task__suvem",completed:"Todo_completed__dbZ0_",filters:"Todo_filters__7upZq",activeFilter:"Todo_activeFilter__71EwN"}},8989:e=>{e.exports={footer:"ListFooter_footer__R80HQ",filters:"ListFooter_filters__tqmv5",activeFilter:"ListFooter_activeFilter__3k9PT",clearCompleted:"ListFooter_clearCompleted__gD227"}},8657:e=>{e.exports={header:"ListHeader_header__T9kJh",title:"ListHeader_title__71MJm",searchContainer:"ListHeader_searchContainer__AUzQq",searchInput:"ListHeader_searchInput___aH_w",searchButton:"ListHeader_searchButton__BW7VP",clearButton:"ListHeader_clearButton__WKTKe"}},4381:e=>{e.exports={input:"Input_input__BmygY"}},7945:e=>{e.exports={button:"ThemeToggle_button__ru1qJ",icon:"ThemeToggle_icon__0YUjH"}},69:e=>{e.exports={task:"TodoItem_task__rvgEz",firstTask:"TodoItem_firstTask__wPuYg",deleteButton:"TodoItem_deleteButton__VMWtx",completed:"TodoItem_completed__8b7uX",text:"TodoItem_text__bCdyX",dragging:"TodoItem_dragging__lIAhO",checkButton:"TodoItem_checkButton__o2dzi",checked:"TodoItem_checked__VUkDu",editInput:"TodoItem_editInput__lHEBB"}},4591:e=>{e.exports={taskList:"TodoList_taskList__dCW_1"}}},e=>{var t=t=>e(e.s=t);e.O(0,[661,205,636,593,792],()=>t(2022)),_N_E=e.O()}]);